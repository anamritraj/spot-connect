{"version":3,"sources":["components/content/content-header.js","components/song-panel/panel-header.js","utils/util.functions.js","components/song-panel/song-panel.js","components/content/content-body.js","utils/song.service.js","components/footer/footer.js","components/app/App.js","components/content/Content.js","components/app/index.js","index.js"],"names":["contentHeader","props","react_default","a","createElement","title","panelHeader","className","row","col","xs","span","offset","lg","href","spotifyurl","target","rel","style","width","src","image","alt","name","album","artists","map","item","index","key","url","length","dt","datetime","Date","parseInt","toLocaleDateString","toLocaleTimeString","getTime","lastplayed","isPlaying","previous","elapsed","time","Math","round","toString","msPerMinute","msPerHour","msPerDay","timeDifference","Panel","collapse","customPanelStyle","borderRadius","marginBottom","overflow","border","boxShadow","songPanel","_ref","data","bordered","header","images","last_played","showArrow","contentBody","console","log","state","songs","element","_id","playing","getRecentlyPlayedSongs","axios","get","Footer","role","aria-label","socket","Content","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","componentDidMount","then","reduce","accum","curr","push","song","setState","catch","error","emit","on","updateSong","is_playing","newState","objectSpread","concat","toConsumableArray","Component","App","endpoint","socketIOClient","res","success","window","location","Content_Content","ReactDOM","render","app","document","getElementById"],"mappings":"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","file":"static/js/main.386feeb4.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./content-header.css\";\r\nexport default function contentHeader(props) {\r\n  return <h1>{props.title}</h1>;\r\n}\r\n","import React from \"react\";\r\nimport { Col, Row } from \"antd\";\r\nimport { timeDifference } from \"../../utils/util.functions\";\r\nexport default function panelHeader(props) {\r\n  const getTime = dt => {\r\n    let datetime = new Date(parseInt(dt));\r\n    let date = datetime.toLocaleDateString();\r\n    let time = datetime.toLocaleTimeString();\r\n    return date + \" \" + time;\r\n  };\r\n\r\n  return (\r\n    <div className=\"song-panel-header\">\r\n      <Row>\r\n        <Col xs={{ span: 8, offset: 0 }} lg={{ span: 4, offset: 0 }}>\r\n          <a href={props.spotifyurl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            <img style={{ width: \"85px\" }} src={props.image} alt=\"song art\" />\r\n          </a>\r\n        </Col>\r\n        <Col xs={{ span: 16, offset: 0 }} lg={{ span: 20, offset: 0 }}>\r\n          <p className=\"song-title\">\r\n            <a\r\n              href={props.spotifyurl}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              {props.name}\r\n            </a>\r\n          </p>\r\n          <p className=\"album\">{props.album}</p>\r\n          <p className=\"artist\">\r\n            {props.artists.map((item, index) => {\r\n              return (\r\n                <span key={index}>\r\n                  <a href={item.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                    {item.name}\r\n                  </a>\r\n                  {index < props.artists.length - 1 ? \", \" : null}\r\n                </span>\r\n              );\r\n            })}\r\n          </p>\r\n          <p className=\"time\" title={getTime(props.lastplayed)}>\r\n            <span>\r\n              {props.isPlaying\r\n                ? \"Now Playing..\"\r\n                : timeDifference(parseInt(props.lastplayed))}\r\n            </span>\r\n          </p>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n","function timeDifference(previous) {\r\n  let current = new Date().getTime();\r\n  var msPerMinute = 60 * 1000;\r\n  var msPerHour = msPerMinute * 60;\r\n  var msPerDay = msPerHour * 24;\r\n  var msPerMonth = msPerDay * 30;\r\n  var msPerYear = msPerDay * 365;\r\n\r\n  var elapsed = current - previous;\r\n\r\n  if (elapsed < msPerMinute) {\r\n    let time = Math.round(elapsed / 1000);\r\n    return time.toString() + (time > 1 ? \" seconds ago\" : \" second ago\");\r\n  } else if (elapsed < msPerHour) {\r\n    let time = Math.round(elapsed / msPerMinute);\r\n    return time.toString() + (time > 1 ? \" minutes ago\" : \" minute ago\");\r\n  } else if (elapsed < msPerDay) {\r\n    let time = Math.round(elapsed / msPerHour);\r\n    return time.toString() + (time > 1 ? \" hours ago\" : \" hour ago\");\r\n  } else if (elapsed < msPerMonth) {\r\n    let time = Math.round(elapsed / msPerDay);\r\n    return (\r\n      \"approximately \" + time.toString() + (time > 1 ? \" days ago\" : \" day ago\")\r\n    );\r\n  } else if (elapsed < msPerYear) {\r\n    let time = Math.round(elapsed / msPerMonth);\r\n    return (\r\n      \"approximately \" +\r\n      time.toString() +\r\n      (time > 1 ? \" months ago\" : \" month ago\")\r\n    );\r\n  } else {\r\n    let time = Math.round(elapsed / msPerYear);\r\n    return (\r\n      \"approximately \" +\r\n      time.toString() +\r\n      (time > 1 ? \" years ago\" : \" year ago\")\r\n    );\r\n  }\r\n}\r\n\r\nexport { timeDifference };\r\n","import React from \"react\";\r\nimport { Collapse, Col } from \"antd\";\r\nimport PanelHeader from \"./panel-header\";\r\nimport \"./song-panel.css\";\r\nconst Panel = Collapse.Panel;\r\n// const text = `\r\n//   A dog is a type of domesticated animal.\r\n//   Known for its loyalty and faithfulness,\r\n//   it can be found as a welcome guest in many households across the world.\r\n// `;\r\n\r\nconst customPanelStyle = {\r\n  borderRadius: 4,\r\n  marginBottom: 24,\r\n  overflow: \"hidden\",\r\n  border: \"solid 1px #e8e8e8\",\r\n  boxShadow: \"0 0 30px #f3f1f1\"\r\n};\r\n\r\nexport default function songPanel({ data, isPlaying }) {\r\n  return (\r\n    <Col xs={{ span: 24, offset: 0 }} lg={{ span: 12, offset: 6 }}>\r\n      <Collapse bordered={false}>\r\n        <Panel\r\n          header={\r\n            <PanelHeader\r\n              isPlaying={isPlaying}\r\n              image={data.album.images[0].url}\r\n              name={data.name}\r\n              album={data.album.name}\r\n              artists={data.artists}\r\n              spotifyurl={data.url}\r\n              lastplayed={data.last_played}\r\n            />\r\n          }\r\n          showArrow={false}\r\n          style={customPanelStyle}\r\n        />\r\n      </Collapse>\r\n    </Col>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport SongPanel from \"../song-panel/song-panel\";\r\nimport { Row } from \"antd\";\r\n\r\nexport default function contentBody(props) {\r\n  console.log(props.state);\r\n  return (\r\n    <div>\r\n      <Row>\r\n        {props.state.songs.map((element, index) => {\r\n          return (\r\n            <SongPanel\r\n              data={element}\r\n              key={element._id}\r\n              isPlaying={index === 0 && props.state.playing ? true : false}\r\n            />\r\n          );\r\n        })}\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\n\r\nconst getRecentlyPlayedSongs = () => {\r\n  return axios.get(\"https://spotapi.anandamritraj.in/spotify/recent\");\r\n};\r\n\r\nexport { getRecentlyPlayedSongs };\r\n","import React from \"react\";\r\nimport \"./footer.css\";\r\nexport default function Footer() {\r\n  return (\r\n    <div className=\"footer\">\r\n      <p>\r\n        Disclaimer: I do not own the songs listed here. I just listen and use my\r\n        magical backend to get the data. All the music is owned by their awesome\r\n        Creators / Singers / Spotify.\r\n      </p>\r\n      <p>\r\n        Thanks for the{\" \"}\r\n        <span role=\"img\" aria-label=\"heart emoji\">\r\n          ❤️\r\n        </span>\r\n        . Keep coming here :) Also, if you like the idea, drop a{\" \"}\r\n        <span role=\"img\" aria-label=\"star emoji\">\r\n          ⭐\r\n        </span>{\" \"}\r\n        at the{\" \"}\r\n        <a\r\n          href=\"https://github.com/anamritraj/spot-connect\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Github Repository\r\n        </a>\r\n        . Hit me up at{\" \"}\r\n        <a\r\n          href=\"https://twitter.com/anamritraj\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          @anamritraj\r\n        </a>\r\n        .\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nimport \"./App.css\";\nimport socketIOClient from \"socket.io-client\";\n\nimport Content from \"../content/Content\";\n\nvar socket;\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      endpoint: \"https://spotapi.anandamritraj.in/\"\n    };\n    socket = socketIOClient(this.state.endpoint);\n  }\n\n  componentDidMount() {\n    axios\n      .get(\n        `https://spotapi.anandamritraj.in/login?email=anandamritraj904@gmail.com`\n      )\n      .then(res => {\n        if (!res.data.success) {\n          window.location.href = \"https://spotapi.anandamritraj.in/login\";\n        }\n      });\n  }\n  render() {\n    return <Content />;\n  }\n}\nexport default App;\nexport { socket };\n","import React, { Component } from \"react\";\r\nimport ContentHeader from \"./content-header\";\r\nimport ContentBody from \"./content-body\";\r\nimport { socket } from \"../app/App\";\r\nimport { getRecentlyPlayedSongs } from \"../../utils/song.service\";\r\nimport \"./content.css\";\r\nimport Footer from \"../footer/footer\";\r\n\r\nexport default class Content extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      songs: [],\r\n      playing: null\r\n    };\r\n  }\r\n  componentDidMount = () => {\r\n    // Lets first get the recently played data from the server\r\n    getRecentlyPlayedSongs()\r\n      .then(({ data }) => {\r\n        let songs = data.data.reduce((accum, curr) => {\r\n          accum.push(curr.song);\r\n          return accum;\r\n        }, []);\r\n        this.setState({\r\n          songs: songs,\r\n          playing: true\r\n        });\r\n      })\r\n      .catch(function(error) {\r\n        // Todo: Show a notification toast.\r\n        console.log(\"There was an error in getting the data\");\r\n        console.log(error);\r\n      });\r\n\r\n    socket.emit(\"join\", \"Anand's Spotify\");\r\n\r\n    socket.on(\"updated_song\", this.updateSong);\r\n  };\r\n\r\n  updateSong = data => {\r\n    if (data.is_playing === false) {\r\n      const newState = {\r\n        ...this.state,\r\n        playing: false\r\n      };\r\n      this.setState(newState);\r\n    } else {\r\n      let songs = [data, ...this.state.songs];\r\n      const newState = {\r\n        songs,\r\n        playing: true\r\n      };\r\n      this.setState(newState);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"content-wrapper\">\r\n        <ContentHeader title=\"Here's what I'm listening to\" />\r\n        <Footer />\r\n        <ContentBody state={this.state} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import App from \"./App\";\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/app\";\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}